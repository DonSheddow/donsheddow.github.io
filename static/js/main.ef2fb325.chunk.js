(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,n){e.exports=n(21)},17:function(e,t,n){},21:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),s=n(10),c=n.n(s),o=n(3),u=n(4),i=n(6),l=n(5),p=n(7),f=(n(17),n(11)),h=n(0),m=n.n(h),b=n(2),d="https://notsheddow.xyz/resp_clone/iframe.html",w=80,x=20,g=1024,k=1048576,v=1073741824;function y(e){return j.apply(this,arguments)}function j(){return(j=Object(b.a)(m.a.mark(function e(t){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e){return setTimeout(e,t)}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function O(e){return S.apply(this,arguments)}function S(){return(S=Object(b.a)(m.a.mark(function e(t){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.frames.length>0)){e.next=5;break}return e.next=3,y(1);case 3:e.next=0;break;case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function E(e){return M.apply(this,arguments)}function M(){return(M=Object(b.a)(m.a.mark(function e(t){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.frames.length){e.next=5;break}return e.next=3,y(1);case 3:e.next=0;break;case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function z(e){try{e.location.href;return!0}catch(t){return!1}}function U(e){return C.apply(this,arguments)}function C(){return(C=Object(b.a)(m.a.mark(function e(t){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(z(t)){e.next=5;break}return e.next=3,y(1);case 3:e.next=0;break;case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function q(e){return N.apply(this,arguments)}function N(){return(N=Object(b.a)(m.a.mark(function e(t){var n,a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n=document.createElement("iframe")).src=t,a=new Promise(function(e){n.onload=e}),document.body.appendChild(n),e.abrupt("return",a);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function _(){return B.apply(this,arguments)}function B(){return(B=Object(b.a)(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==window.frames.length){e.next=3;break}return e.next=3,q(d);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function T(){return L.apply(this,arguments)}function L(){return(L=Object(b.a)(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==window.frames[0].frames.length){e.next=4;break}return window.frames[0].postMessage({action:"kill_process"},"*"),e.next=4,O(window.frames[0]);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function D(){return I.apply(this,arguments)}function I(){return(I=Object(b.a)(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.frames[0].location="about:blank",e.next=3,U(window.frames[0]);case 3:return window.frames[0].location=d,e.next=6,E(window.frames[0]);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function J(e,t){return P.apply(this,arguments)}function P(){return(P=Object(b.a)(m.a.mark(function e(t,n){var a,r,s,c=arguments;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s=function(e){r=e.data},a=c.length>2&&void 0!==c[2]?c[2]:1/0,r=0,window.addEventListener("message",s),window.frames[0].postMessage({action:"clone_until_crash",url:t,alloc_size:n},"*");case 5:if(!(window.frames[0].frames.length>0&&r<a)){e.next=10;break}return e.next=8,y(1);case 8:e.next=5;break;case 10:return window.removeEventListener("message",s),e.next=13,T();case 13:return e.next=15,D();case 15:return e.abrupt("return",r);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function R(e,t){return F.apply(this,arguments)}function F(){return(F=Object(b.a)(m.a.mark(function e(t,n){var a,r,s,c,o=arguments;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=o.length>2&&void 0!==o[2]?o[2]:5,r=o.length>3&&void 0!==o[3]?o[3]:1/0,s=[],c=0;case 4:if(!(c<a)){e.next=13;break}return e.t0=s,e.next=8,J(t,n,r);case 8:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 10:c++,e.next=4;break;case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}function G(e){return n=w+x,w-x<=(t=e)&&t<=n;var t,n}function K(e,t){return V.apply(this,arguments)}function V(){return(V=Object(b.a)(m.a.mark(function e(t,n){var a,r,s,c,o,u,i,l=arguments;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>2&&void 0!==l[2]?l[2]:10*k,r=n,e.next=4,J(t,r,200);case 4:if(s=e.sent,console.log(s),!G(s)){e.next=10;break}return e.abrupt("return",{size:r,measurement:s});case 10:if(!(s<w)){e.next=29;break}console.log("exponential search downwards"),c=r,u=a;case 14:if(!(s<w)){e.next=26;break}return r-=u,u*=2,e.next=19,J(t,r,200);case 19:if(s=e.sent,console.log(A(r)),console.log(s),!G(s)){e.next=24;break}return e.abrupt("return",{size:r,measurement:s});case 24:e.next=14;break;case 26:o=r,e.next=45;break;case 29:console.log("exponential search upwards"),o=r,i=a;case 32:if(!(s>w)){e.next=44;break}return r+=i,i*=2,e.next=37,J(t,r,200);case 37:if(s=e.sent,console.log(A(r)),console.log(s),!G(s)){e.next=42;break}return e.abrupt("return",{size:r,measurement:s});case 42:e.next=32;break;case 44:c=r;case 45:console.log("Doing binary search between ".concat(A(o)," and ").concat(A(c)));case 46:if(!(o<c)){e.next=60;break}return r=Math.floor(o+.6*(c-o)),e.next=50,J(t,r,200);case 50:if(s=e.sent,console.log(A(r)),console.log(s),!G(s)){e.next=57;break}return e.abrupt("break",60);case 57:s<w?c=r:o=r;case 58:e.next=46;break;case 60:return e.next=62,H(t,r,200);case 62:if(G(s=e.sent)){e.next=65;break}return e.abrupt("return",K(t,r,5*k));case 65:return e.abrupt("return",{size:r,measurement:s});case 66:case"end":return e.stop()}},e)}))).apply(this,arguments)}function A(e){var t=Math.floor(e/v),n=Math.floor(e%v/k),a=Math.floor(e%k/g);return"size: ".concat(t," GB + ").concat(n," MB + ").concat(a," KB")}function H(e,t){return Q.apply(this,arguments)}function Q(){return(Q=Object(b.a)(m.a.mark(function e(t,n){var a,r,s,c=arguments;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>2&&void 0!==c[2]?c[2]:1/0,e.next=3,_();case 3:return r=window.performance.now(),e.next=6,R(t,n,3,a);case 6:return s=e.sent,console.log("elapsed: ".concat(window.performance.now()-r)),console.log(s),s.sort(function(e,t){return e-t}),e.abrupt("return",s[1]);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function W(){return(W=Object(b.a)(m.a.mark(function e(t){var n,a,r,s=arguments;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:void 0,e.next=3,_();case 3:return a=window.performance.now(),n||(n=4*v),console.log("Tuning..."),e.next=8,K(t,n);case 8:return r=e.sent,console.log("elapsed for tuning: ".concat(window.performance.now()-a)),e.abrupt("return",r);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}var X=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(i.a)(this,Object(l.a)(t).call(this,e))).id=Object(f.uniqueId)("urlinput_"),n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("label",{htmlFor:this.id},this.props.label),r.a.createElement("input",{id:this.id,className:"url-input",type:"text",defaultValue:this.props.url,onChange:this.props.onChange}),this.props.children)}}]),t}(r.a.Component),Y=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(i.a)(this,Object(l.a)(t).call(this,e))).calibrate=function(){n.setState({loadingState:"Calibrating..."}),function(e){return W.apply(this,arguments)}(n.state.calibrationUrl,n.state.allocSize).then(function(e){var t=e.size,a=e.measurement;n.setState({loadingState:null,allocSize:t,baseMeasurement:a})})},n.measure=function(){n.setState({loadingState:"Measuring..."}),H(n.state.testUrl,n.state.allocSize).then(function(e){n.setState({loadingState:null,measurement:e}),!function(e,t){var n=Math.abs(e-t);return n<=.4*e||n<=.4*t}(n.state.baseMeasurement,n.state.measurement)?n.setState({equal:!1}):n.setState({equal:!0})})},n.setCalibrationUrl=function(e){n.setState({calibrationUrl:e.target.value})},n.setTestUrl=function(e){n.setState({testUrl:e.target.value})},n.state={allocSize:null,calibrationUrl:"https://sheddow.xyz/flask/bytes?len=1000",testUrl:"https://sheddow.xyz/flask/bytes?len=1025",loadingState:null,baseMeasurement:null,measurement:null},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.calibrate()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(X,{label:"Base URL",url:this.state.calibrationUrl,onChange:this.setCalibrationUrl},r.a.createElement("span",{className:"measurement"},this.state.baseMeasurement),this.state.loadingState?this.state.loadingState:r.a.createElement("button",{onClick:this.calibrate},"Calibrate")),r.a.createElement(X,{label:"Test URL",url:this.state.testUrl,onChange:this.setTestUrl},r.a.createElement("span",{className:"measurement"},this.state.measurement),this.state.loadingState?this.state.loadingState:r.a.createElement("button",{onClick:this.measure},"Measure")),null!==this.state.measurement&&null!==this.state.baseMeasurement?this.state.equal?r.a.createElement("span",{className:"equal"},"Equal"):r.a.createElement("span",{className:"not-equal"},"Not Equal"):null)}}]),t}(r.a.Component);c.a.render(r.a.createElement(Y,null),document.getElementById("root"))}},[[12,1,2]]]);
//# sourceMappingURL=main.ef2fb325.chunk.js.map